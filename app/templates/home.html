<!--
Dogtree Erasers: Karen Shekyan, Kevin Liu, Mahir Riki, Ian Jiang
SoftDev
K23 - Frameworks
2022-11-28
time spent:  hrs
-->

<!DOCTYPE HTML>
<html lang="en">

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <link rel="stylesheet" Type="text/css" href="../static/css/style.css">
  </head>

  <body>

    <nav class="navbar sticky-top navbar-expand-lg bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="/home">
          <!-- CURRENT page title -->
          <img src="">Home
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <!-- <a class="nav-link active" aria-current="page" href="/home">Home</a> -->
            <a class="nav-link" href="/profile">Profile</a>
            <a class="nav-link" href="/joke">Joke</a>
            <form autocomplete="off" action="{{ url_for('search') }}" class="d-flex" role="search">
              <div class="autocomplete">
                <input id="myInput" class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
              </div>
              <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
            <script>
              let autocomplete = (inp, arr) => {
                let currentFocus;
                inp.addEventListener("input", function(e) {
                  let a, b, i, val = this.value;
                  closeAllLists();
                  if (!val) {
                    return false;
                  }
                  currentFocus = -1;
                  a = document.createElement("DIV");
                  a.setAttribute("id", this.id + "autocomplete-list");
                  a.setAttribute("class", "autocomplete-items list-group text-left");
                  this.parentNode.appendChild(a);
                  for (i = 0; i < arr.length; i++) {
                    if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                      b = document.createElement("DIV");
                      b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
                      b.innerHTML += arr[i].substr(val.length);
                      b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
                      b.addEventListener("click", function(e) {
                        inp.value = this.getElementsByTagName("input")[0].value;
                        closeAllLists();
                      });
                      a.appendChild(b);
                    }
                  }
                });

                inp.addEventListener("keydown", function(e) {
                  var x = document.getElementById(this.id + "autocomplete-list");
                  if (x) x = x.getElementsByTagName("div");
                  if (e.keyCode == 40) {
                    currentFocus++;
                    addActive(x);
                  } else if (e.keyCode == 38) {
                    currentFocus--;
                    addActive(x);
                  } else if (e.keyCode == 13) {
                    e.preventDefault();
                    if (currentFocus > -1) {
                      if (x) x[currentFocus].click();
                    }
                  }
                });

                // methods used for autocomplete
                let addActive = (x) => {
                  if (!x) return false;
                  removeActive(x);
                  if (currentFocus >= x.length) currentFocus = 0;
                  if (currentFocus < 0) currentFocus = x.length - 1;
                  x[currentFocus].classList.add("active");
                }
                let removeActive = (x) => {
                  for (let i = 0; i < x.length; i++) {
                    x[i].classList.remove("active");
                  }
                }
                let closeAllLists = (elmt) => {
                  var x = document.getElementsByClassName("autocomplete-items");
                  for (var i = 0; i < x.length; i++) {
                    if (elmt != x[i] && elmt != inp) {
                      x[i].parentNode.removeChild(x[i]);
                  }
                }
              }

              document.addEventListener("click", function(e) {
                closeAllLists(e.target);
              });
            };

            // database connection
            /* const sqlite3 = require("sqlite3").verbose();
            let db = new sqlite3.Database('app/character.db');
            let query = 'SELECT name FROM heroes ORDER BY name';
            let heroes = [];
            db.all(query, (err, rows) => {
              if (err) { throw err };
              rows.forEach((row) => {
                heroes.push(row.name);
              });
            });
            db.close(); */

            // this is an example; if you type hello into the search bar itll show up
            let heroes = ['hello', 'new', 'example'];

            autocomplete(document.getElementById("myInput"), heroes);
            </script>
            <a class="nav-link" href="/logout">Logout</a>
          </div>
        </div>
      </div>
    </nav>


    <div class="container text-center">
      <div class="row g-2">
        <div class="col-12">
          <div class="p-3 title border-0 bg-transparent">
            TITLE <p> DESCRIPTION </p>
          </div>
        </div>
        <div class="col-6 ad">
          <div class="p-3 border-0"> AD SPACE </div>
        </div>
        <div class="col-6 recent">
          <div class="p-3 border-0"> Recently favorited </div>
        </div>
      </div>
    </div>


    <!-- <div class="grid text-center" style="--bs-columns: 3;">
      <div>
        First auto-column
        <div class="grid">
          <div>Auto-column</div>
          <div>Auto-column</div>
        </div>
      </div>
    </div> -->

  </body>

</html>
